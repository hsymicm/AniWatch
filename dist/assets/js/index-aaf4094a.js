import{r as Z,j as n,a as u,b as o,u as E,F as S,N as y,c as U,R as ee,d as _,B as te}from"./vendor-9d4999d7.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var H,W=Z.exports;H=W.createRoot,W.hydrateRoot;function w(t){return n("button",{onClick:t.onClick,style:{...t==null?void 0:t.style,width:t==null?void 0:t.width},className:t==null?void 0:t.className,children:t==null?void 0:t.label})}function V({children:t,onClick:e,scrollPos:r,blur:i=!0}){return n("div",{onClick:e,style:{zIndex:i?999:101},className:i?"backdrop backdrop-bg":"backdrop",children:t})}const N=48,ne=({color:t="currentColor",direction:e="left",distance:r="md",duration:i=.4,easing:s="cubic-bezier(0, 0, 0, 1)",hideOutline:a=!0,label:c,lines:l=3,onToggle:d,render:h,rounded:f=!1,size:p=32,toggle:b,toggled:v})=>{const[m,x]=u.exports.useState(!1),g=Math.max(12,Math.min(N,p)),$=Math.round((N-g)/2),R=g/12,k=Math.round(R),T=g/(l*((r==="lg"?.25:r==="sm"?.75:.5)+(l===3?1:1.25))),L=Math.round(T),K=k*l+L*(l-1),J=Math.round((N-K)/2),Q=l===3?r==="lg"?4.0425:r==="sm"?5.1625:4.6325:r==="lg"?6.7875:r==="sm"?8.4875:7.6675,X=(R-k+(T-L))/(l===3?1:2),Y=parseFloat((g/Q-X/(4/3)).toFixed(2)),O=Math.max(0,i),A={cursor:"pointer",height:`${N}px`,position:"relative",transition:`${O}s ${s}`,userSelect:"none",width:`${N}px`},B={background:t,height:`${k}px`,left:`${$}px`,position:"absolute"};a&&(A.outline="none"),f&&(B.borderRadius="9em");const G=b||x,P=v!==void 0?v:m;return h({barHeight:k,barStyles:B,burgerStyles:A,easing:s,handler:()=>{G(!P),typeof d=="function"&&d(!P)},isLeft:e==="left",isToggled:P,label:c,margin:L,move:Y,time:O,topOffset:J,width:g})};const se=t=>n(ne,{...t,render:e=>o("div",{className:"hamburger-react","aria-label":e.label,"aria-expanded":e.isToggled,onClick:e.handler,onKeyUp:r=>r.key==="Enter"&&e.handler(),role:"button",style:e.burgerStyles,tabIndex:0,children:[n("div",{style:{...e.barStyles,width:`${e.width}px`,top:`${e.topOffset}px`,transition:`${e.time}s ${e.easing}`,transform:`${e.isToggled?`rotate(${45*(e.isLeft?-1:1)}deg) translate(${e.move*(e.isLeft?-1:1)}px, ${e.move}px)`:"none"}`}}),n("div",{style:{...e.barStyles,width:`${e.width}px`,top:`${e.topOffset+e.barHeight+e.margin}px`,transition:`${e.time}s ${e.easing}`,opacity:`${e.isToggled?"0":"1"}`}}),n("div",{style:{...e.barStyles,width:`${e.width}px`,top:`${e.topOffset+e.barHeight*2+e.margin*2}px`,transition:`${e.time}s ${e.easing}`,transform:`${e.isToggled?`rotate(${45*(e.isLeft?1:-1)}deg) translate(${e.move*(e.isLeft?-1:1)}px, ${e.move*-1}px)`:"none"}`}})]})});function re({onEmit:t,menu:e,setMenu:r}){const i=E();return o(S,{children:[n("nav",{children:o("div",{className:"nav-row",children:[o("h2",{onClick:()=>{i("/"),r(!1)},className:"pointer text-white",children:["Ani",n("span",{className:"text-red",children:"Watch"})]}),o("ul",{className:"nav-li text-white",children:[n(y,{to:"/",className:({isActive:s})=>"link text-white "+(s?"link-active":""),children:"Home"}),n(y,{to:"/watchlist",className:({isActive:s})=>"link text-white "+(s?"link-active":""),children:"Watchlist"}),n(w,{onClick:t,className:"btn btn-primary",label:"Add Anime"})]})]})}),n("div",{className:"nav-drop glb-container",children:n(se,{toggled:e,toggle:r,size:28,color:"#e5e5e5",easing:"ease",rounded:!0})}),o("div",{className:`menu glb-container ${e?"menu-active":""}`,children:[n(y,{onClick:()=>r(!1),to:"/",className:({isActive:s})=>"menu-link text-white "+(s?"menu-link-active":""),children:"Home"}),n(y,{onClick:()=>r(!1),to:"/watchlist",className:({isActive:s})=>"menu-link text-white "+(s?"menu-link-active":""),children:"Watchlist"}),n(w,{style:{marginTop:"12px"},onClick:()=>{r(!1),t()},className:"btn btn-border",label:"Add Anime"})]}),e&&n(V,{onClick:()=>r(!1),blur:!1})]})}const ae="modulepreload",ie=function(t){return"/aniwatch/"+t},D={},q=function(e,r,i){if(!r||r.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=ie(a),a in D)return;D[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!i)for(let f=s.length-1;f>=0;f--){const p=s[f];if(p.href===a&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":ae,c||(h.as="script",h.crossOrigin=""),h.href=a,document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e())};function le(){const{pathname:t}=U();return u.exports.useEffect(()=>{window.scrollTo(0,0)},[t]),null}const ce=u.exports.lazy(()=>q(()=>import("./Home-fb573add.js"),["assets/js/Home-fb573add.js","assets/js/vendor-9d4999d7.js","assets/css/Home-26013107.css"])),oe=u.exports.lazy(()=>q(()=>import("./Watchlist-09578a69.js"),["assets/js/Watchlist-09578a69.js","assets/js/vendor-9d4999d7.js","assets/css/Watchlist-fd50ef50.css"]));function de({onEmit:t}){return o(S,{children:[n(le,{}),n(u.exports.Suspense,{fallback:n("main",{}),children:o(ee,{children:[n(_,{index:!0,exact:!0,path:"/",element:n(ce,{onEmit:t})}),n(_,{path:"/watchlist",element:n(oe,{})})]})})]})}function he({setMenu:t}){const e=E();return n("footer",{children:o("div",{className:"footer-row glb-container",children:[o("div",{className:"footer-li",children:[n("h3",{onClick:()=>{e("/"),t(!1)},className:"text-white pointer",children:"AniWatch"}),n("div",{className:"spacer"}),o("ul",{className:"footer-ul text-white",children:[n(y,{onClick:()=>t(!1),to:"/",className:({isActive:r})=>"link text-white "+(r?"link-active":""),children:"Home"}),n(y,{onClick:()=>t(!1),to:"/watchlist",className:({isActive:r})=>"link text-white "+(r?"link-active":""),children:"Watchlist"})]})]}),o("p",{className:"text-white footer-credit",children:[n("span",{children:"Made By"}),n("br",{}),"M Fadil Hisyam, M Rafli, Rizki Patria",n("br",{}),"3IA13 - Ujian PWEB"]})]})})}const z="/aniwatch/assets/img/4a3edadd.svg";const ue="/aniwatch/assets/img/9796abfb.svg";function me({filter:t,options:e,width:r,getSelected:i,defaultVal:s}){const[a,c]=u.exports.useState(!1),[l,d]=u.exports.useState(s||null),h=u.exports.useRef(null),f=g=>{h.current&&!h.current.contains(g.target)&&c(!1)};u.exports.useEffect(()=>(window.addEventListener("click",f,!0),()=>{window.removeEventListener("click",f,!0)}));const p=()=>{c(!a)},b=()=>l||t,v=g=>{d(g),i(g)},m=g=>l?l===g:!1;return o("div",{style:{width:r},className:`combo-box ${l?"option-selected":""}`,onClick:l?()=>{l&&(d(null),i(null))}:p,children:[b(),l&&n("img",{style:{width:"12px",margin:"0 2px"},src:z}),!l&&n("img",{style:{transform:a?"rotate(-180deg)":""},src:ue}),a&&o("div",{ref:h,className:"combo",children:[n("div",{className:"arrow-top"}),n("div",{className:"overflow-box",children:n("ul",{className:"scroll-bar",children:e.map((g,$)=>n("li",{style:{marginRight:e.length>4?"8px":""},className:m(g)?"active":"",onClick:()=>v(g),children:g},$))})})]})]})}const M="/aniwatch/assets/img/7f1c5e64.svg";function F({width:t,limit:e,increase:r,getValue:i,defaultVal:s}){const[a,c]=u.exports.useState(s||0),l=(d,h=0,f=!0)=>{let p;if(d||(d=0),f)p=a-(a%d+d)%d+d;else try{p=parseFloat(d)}catch{c(a);return}p>h?c(h):p<0?c(0):c(p)};return u.exports.useEffect(()=>{i(a||null)},[a]),o("div",{style:{width:t},className:"incremental-box",children:[n("input",{value:a,onChange:d=>l(d.target.value,e,!1),type:"text",className:"input-box"}),o("div",{className:"control",children:[n("img",{onClick:()=>l(r,e),width:"8px",src:M}),n("img",{onClick:()=>l(-r,e),width:"8px",src:M,style:{transform:"rotate(180deg)"}})]})]})}function ge({label:t,getText:e,defaultVal:r}){const[i,s]=u.exports.useState(r||"");return o(S,{children:[n("h4",{children:t}),n("textarea",{value:i,onChange:c=>{const l=c.target.value;s(l),e&&e(l)},className:"text-area"})]})}const fe=(t,e)=>t.length>e?t.slice(0,e-1)+"...":t,pe=(t,e=1)=>{if(!t)return`hsla(0, 100%, 100%, ${e/2})`;let r=parseInt(t.substring(1),16),i=(r>>16&255)/255,s=(r>>8&255)/255,a=(r>>0&255)/255,c=Math.max(i,s,a),l=Math.min(i,s,a),d=(c+l)/2;if(c==l)d=0;else{let h=c-l;switch(c){case i:d=(s-a)/h+(s<a?6:0);break;case s:d=(a-i)/h+2;break;case a:d=(i-s)/h+4;break}d/=6}return`hsla(${Math.round(360*d)}, ${90}%, ${75}%, ${e})`},xe={Watching:[],Completed:[],Planning:[]},ve=()=>(C("watchlist",xe),j("watchlist")),C=(t,e)=>{localStorage.setItem(t,JSON.stringify(e)),window.dispatchEvent(new Event("storage"))},j=t=>JSON.parse(localStorage.getItem(t)),I=()=>{const t=j("watchlist");return t||ve()},be=(t,e)=>{const r=I();r[e].unshift(t),C("watchlist",r)},ye=(t,e)=>{const r=I();r[e].splice(t,1),C("watchlist",r)},we=(t,e,r,i)=>{const s=I();s[e].splice(t,1),e===r?s[r].splice(t,0,i):s[r].unshift(i),C("watchlist",s)},$e=["Watching","Completed","Planning"],Ne="linear-gradient(0deg, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.3))";function ke({handleClose:t,data:e,index:r,status:i,isUpdate:s}){var v;const a=E(),[c,l]=u.exports.useState(i||null),[d,h]=u.exports.useState(s?e:{...e,progress:null,score:null,notes:""}),f=(m,x=null)=>{!x||(be(m,x),t(),a("/watchlist"))},p=(m,x)=>{!m||(ye(m,x),t())},b=(m,x,g,$)=>{!m||(we(m,x,g,$),t())};return o("div",{onClick:m=>m.stopPropagation(),className:"modal-box text-white",children:[o("div",{style:{background:`${Ne},url(${e==null?void 0:e.banner})`,backgroundSize:"cover",backgroundPosition:"center"},className:"modal-header modal-padding",children:[o("div",{className:"modal-title",children:[n("img",{style:{boxShadow:`0 4px 10px ${pe(e.cover.color,.2)}`},className:"cover",src:(v=e==null?void 0:e.cover)==null?void 0:v.url}),n("div",{className:"title",children:fe(e.title.english?e.title.english:e.title.romaji,100)})]}),n("img",{style:{cursor:"pointer"},onClick:t,src:z,width:"18px"})]}),o("div",{className:"modal-padding modal-content",children:[o("div",{className:"modal-row",children:[o("div",{className:"modal-item",children:[n("h4",{children:"Status"}),n(me,{getSelected:m=>l(m),filter:"Status",options:$e,defaultVal:i})]}),o("div",{className:"modal-item",children:[n("h4",{children:"Score"}),n(F,{getValue:m=>{h({...d,score:m})},increase:5,limit:100,defaultVal:e==null?void 0:e.score})]}),o("div",{className:"modal-item",children:[n("h4",{children:"Episode"}),n(F,{getValue:m=>{h({...d,progress:m})},increase:1,limit:e.episodes?e.episodes:0,defaultVal:e==null?void 0:e.progress})]})]}),n("div",{className:"modal-item",children:n(ge,{label:"Notes",getText:m=>h({...d,notes:m}),defaultVal:e==null?void 0:e.notes})}),o("div",{style:{justifyContent:s?"space-between":"end"},className:"modal-btn",children:[s&&n(w,{onClick:()=>p(r,i),className:"btn btn-secondary",label:"Delete"}),o("div",{className:"right-btn",children:[n(w,{onClick:t,className:"btn btn-secondary",label:"Cancel"}),n(w,{onClick:()=>{s?b(r,i,c,d):f(d,c)},className:"btn btn-primary",label:"Save"})]})]})]})]})}const Se="/aniwatch/assets/img/824f6546.svg";const Ce="/aniwatch/assets/img/2f783ca2.svg";function Le({search:t,placeholder:e,autoFocus:r,liveSearch:i,withButton:s}){const[a,c]=u.exports.useState("");return o("div",{style:{display:"flex",width:"100%"},children:[o("div",{style:{borderRadius:s?"8px 0 0 8px":""},className:"search-box",children:[n("img",{src:Ce}),n("input",{autoFocus:r,value:a,onChange:h=>{const f=h.target.value;c(f),i&&t(f)},onKeyPress:h=>{h.key==="Enter"&&(t(a),c(""))},type:"text",placeholder:e,className:"search-box"})]}),s&&n(w,{onClick:()=>{t(a),c("")},style:{borderRadius:"0 8px 8px 0"},label:"Search",width:"140px",className:"btn btn-primary"})]})}async function Pe(t,e){var r="https://graphql.anilist.co",i={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:t,variables:e})};return window.fetch(r,i).then(Ee).then(Ie).catch(Re)}function Ee(t){return t.json().then(function(e){return t.ok?e:Promise.reject(e)})}function Ie(t){return t.data.Page.media}function Re(t){console.error(t)}const Te=`
query ($id: Int, $search: String, $page: Int, $perPage: Int, $sortType: [MediaSort], $genre: [String]) {
    Page (page: $page, perPage: $perPage) {
        media (id: $id, search: $search, type: ANIME, sort: $sortType, genre_in: $genre) {
            title { english romaji }
            cover:coverImage { url:extraLarge color }
            banner:bannerImage
            genres
            type:format
            episodes
            isAdult
        }
    }
}`;async function Oe(t){return await Pe(Te,{perPage:5,page:1,sortType:["POPULARITY_DESC"],search:t})}function Ae({getData:t}){const[e,r]=u.exports.useState(""),[i,s]=u.exports.useState([]),[a,c]=u.exports.useState(!1);return u.exports.useEffect(()=>{if(c(!1),!e){s([]);return}Oe(e).then(l=>s(l)).then(()=>c(!0)).catch(l=>console.log(l))},[e]),o("div",{onClick:l=>l.stopPropagation(),className:"modal-box modal-padding text-white",children:[n("div",{className:"search-flex",children:n(Le,{style:{borderRadius:"8px 0 0 8px"},placeholder:"Search anime that you want to add",search:l=>r(l),autoFocus:!0,withButton:!0})}),e&&!a&&n("div",{className:"search-result scroll-bar",children:[...Array(2).keys()].map(l=>o("div",{className:"search-item-skeleton",children:[n("div",{className:"skeleton img-skeleton"}),n("div",{className:"skeleton title-skeleton"})]},l))}),a&&i.length>0&&n("div",{className:"search-result scroll-bar",children:i.map((l,d)=>l.isAdult?null:o("div",{onClick:()=>t(l),style:{marginRight:i.length>3?"8px":""},className:"search-item",children:[o("div",{className:"item-title",children:[n("div",{className:"item-image",children:n("img",{src:l.cover.url})}),n("p",{children:l.title.english?l.title.english:l.title.romaji})]}),n("img",{src:Se,width:"18px"})]},d))})]})}function Be({handleClose:t,scrollPos:e,index:r,objUpdate:i}){const[s,a]=u.exports.useState(i?i.obj:[]),[c,l]=u.exports.useState(!!i);return o(V,{scrollPos:e,onClick:t,children:[!c&&n(Ae,{getData:h=>{a(h),l(!0)},handleClose:t}),c&&n(ke,{handleClose:t,data:s,index:r,status:i==null?void 0:i.status,isUpdate:!!i})]})}function _e(){const[t,e]=u.exports.useState(!1),[r,i]=u.exports.useState(!1);return u.exports.useEffect(()=>{document.body.style.overflow=t?"hidden":""},[t]),o(S,{children:[n(re,{menu:r,setMenu:i,onEmit:()=>e(!0)}),t&&n(Be,{scrollPos:window.scrollY,handleClose:()=>e(!1)}),n(de,{onEmit:()=>e(!0)}),n(he,{setMenu:i})]})}H(document.getElementById("root")).render(n(te,{basename:"/aniwatch/",children:n(_e,{})}));export{w as B,me as C,Be as M,Le as S,I as a,pe as g,xe as t};
